<mat-spinner class="loading" *ngIf="displayLoading"></mat-spinner>

<div class="container flex-column" *ngIf="!displayError">
    <!-- <div class="inst">
        <h2>Choose workday date, pick employees from this day and their tasks.</h2>
    </div> -->
    <div class="flex-column date">
        <date-picker (changedWorkdayDate)="onDateChangeCreateDayActions($event)"></date-picker>
        <p class="day-note" *ngIf="displayDateError">
            {{dayNote}}
        </p>
    </div>
    <div class="panel flex-column">
        <mat-accordion>
            <!-- header -panel -->
            <mat-expansion-panel hideToggle disabled>
                <mat-expansion-panel-header>
                    <div class="panel-elements flex-column">
                        <p class="element">Name</p>
                        <p class="element">Surname</p>
                        <p class="element">Identifier</p>
                        <p>
                            <!-- remove button -->
                        </p>
                    </div>
                </mat-expansion-panel-header>
            </mat-expansion-panel>

            <!-- no emloyees info panel -->
            <mat-expansion-panel [hideToggle]="'true'" disabled *ngIf="choosenEmployees.length == 0">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        <p class="info">No employees added.</p>
                    </mat-panel-title>
                </mat-expansion-panel-header>
            </mat-expansion-panel>

            <!-- choosen employees panel -->
            <mat-expansion-panel *ngFor="let employee of choosenEmployees; let index" expanded>
                <mat-expansion-panel-header>
                    <div class="panel-elements flex-column">
                        <p class="name element">{{employee.firstName}}</p>
                        <p class="surname element">{{employee.lastName}}</p>
                        <p class="identifier element">{{employee.employeeId}}</p>
                        <button class="btn" mat-icon-button (click)="removeEmployee(employee)">
                            <mat-icon class="remove">remove_circle</mat-icon>
                        </button>
                    </div>
                </mat-expansion-panel-header>
                <!-- extension -->
                <div class="extended-panel flex-column">
                    <!-- left side -->
                    <div class="left-side-panel">
                        <h3 class="actions-description">Select actions</h3>
                        <p class="tip" *ngIf="getUserActionsOfEmployee(employee).actions.length > 0">
                            click on action to remove
                        </p>
                        <mat-form-field appearance="fill" class="select">
                            <mat-label>Action type</mat-label>
                            <mat-select name="action-type" required (selectionChange)="selected($event, employee)">
                                <mat-option *ngFor="let type of ActionType.values(); let i = index" [value]="type">
                                    {{i + 1}}. {{type}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <!-- right side -->
                    <div class="right-side-panel">
                        <mat-list class="flex-column" *ngIf="employee" fxLayout="row">
                            <mat-list-item
                                *ngFor="let action of getUserActionsOfEmployee(employee).actions; let i = index">
                                <p (click)="removeActionFromUserActionsOnPosition(employee, i)">
                                    {{i + 1}}. {{action.type}}
                                </p>
                            </mat-list-item>
                        </mat-list>
                    </div>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
    <!-- add employee button -->
    <div>
        <button class="btn add-employee" mat-mini-fab>
            <mat-icon class="add-icon" (click)="onPlusButtonClick();">add</mat-icon>
        </button>

    </div>
    <!-- submit form button -->
    <div class="add-btn">
        <button [disabled]="disableSubmit" class="submit add btn" mat-raised-button (click)="onSubmit()">
            Add
        </button>
    </div>
</div>
<div *ngIf="displayError" class="no-data-error">
    <h1>
        {{error}}
    </h1>
</div>